\usepackage{graphicx}           % Required for inserting images
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{enumitem}
\usepackage{titling}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{subfiles}
\usepackage{nicematrix}
\usepackage{xparse, etoolbox}   % Allows for more elegant command solutions like 2 default values.
\usepackage{xstring}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float} 
\usepackage{changepage}         % To indent blocks

%custom colors:
\definecolor{forest}{RGB}{34, 139, 32}

%specific to this project:
\usepackage{braket} %allows to make quantum brackets with \bra \ket
\usepackage{quantikz} %allows for quantum circuits to be drawn.

%general math commands:
\newcommand{\sumX}{\displaystyle\sum}
\newcommand{\sinhalf}[1]{\sin(\frac{#1}{2})}
\newcommand{\coshalf}[1]{\cos(\frac{#1}{2})}
\newcommand{\sinphihalf}[1]{\sinhalf{\varphi}}
\newcommand{\cosphihalf}[1]{\coshalf{\varphi}}
\newcommand{\mC}[1]{\mathbb{C}^{#1}}
\newcommand{\abs}[1]{\left| #1 \right|}

%linalg commands:
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\colvec}[1]{%
    \begin{pmatrix}
    #1
    \end{pmatrix}
}

\newcommand{\idmattwo}[1]{
  \ensuremath{\begin{pmatrix} #1 & 0 \\ 0 & #1 \end{pmatrix}}
}

\newcommand{\unimattwo}{\ensuremath{\begin{pmatrix} 0 & 1 \\ 1 & 0 \end{pmatrix}}}

\newcommand*{\expec}[1][]{\ensuremath{\mathbb{E}[#1]}}

%specific new commands for this project:
\newcommand{\ketz}[0]{\ensuremath{\ket{0}}}
\newcommand{\keto}[0]{\ensuremath{\ket{1}}}
\newcommand{\ketzz}[0]{\ensuremath{\ket{00}}} 
\newcommand{\ketzo}[0]{\ensuremath{\ket{01}}}
\newcommand{\ketoz}[0]{\ensuremath{\ket{10}}}
\newcommand{\ketoo}[0]{\ensuremath{\ket{11}}}

\newcommand{\braz}[0]{\ensuremath{\bra{0}}}
\newcommand{\brao}[0]{\ensuremath{\bra{1}}}
\newcommand{\brazz}[0]{\ensuremath{\bra{00}}} 
\newcommand{\brazo}[0]{\ensuremath{\bra{01}}}
\newcommand{\braoz}[0]{\ensuremath{\bra{10}}}
\newcommand{\braoo}[0]{\ensuremath{\bra{11}}}

\newcommand{\tbra}[1]{\ensuremath{\bra{#1}}}
\newcommand{\tket}[1]{\ensuremath{\ket{#1}}}

\newcommand{\ketp}[0]{\ensuremath{\ket{\psi}}}
\newcommand{\ketpp}[0]{\ensuremath{\ket{\psi'}}}


% #1 decides the dimentions of the kets #2 is a boolian for normalisation of sqrt2 or not #3 actual ket body with some extra features
\NewDocumentCommand{\ketX}{O{1} O{0} m}{%
  \ensuremath{
  % --- Prefix Conditional (Argument #2) ---
  \IfEq{#2}{1}{\frac{1}{\sqrt{2}}(}{}%
  % --- Main Switch (Argument #3) ---
  \IfEqCase{#3}{%
    {+}{%
      % Inner Conditional (Argument #1)
      \IfEqCase{#1}{%
        {1}{\ket{0} + \ket{1}}%
        {2}{ErrDimensions}%
      }[{\ket{ErrDimensions}}]%
    }%
    {-}{%
      % Inner Conditional (Argument #1)
      % Inner Conditional (Argument #1)
      \IfEqCase{#1}{%
        {1}{\ket{0} - \ket{1}}%
        {2}{ErrDimensions}%
      }[{\ket{ErrDimensions}}]%
    }%
    % ... other cases ...
  }[\ket{#3}]%
  }
  % --- Prefix Conditional (Argument #2) ---
  \IfEq{#2}{1}{)}{}%
}

\newcommand{\brap}[0]{\ensuremath{\bra{\psi}}}

\newcommand*{\compbas}[0]{\ensuremath{\{\ketz, \keto\}}}

\NewDocumentCommand{\BraKet}{O{\psi} m}{%
   \ensuremath{
        \notblank{#2}{%
            % Case when #2 is non-empty
            \bra{#1} #2 \ket{#1}
        }{%
            % Case when #2 is empty (i.e., {})
            \braket{#1 | #1}
        }%
   }
} 

% first optional choses + or - 2nd and 3rd the 2 probabilities infront of ketz and keto
\NewDocumentCommand{\super}{O{+} O{\alpha} O{\beta}}{\ensuremath{#2\ketz #1 #3\keto}}%

\newcommand{\qc}[1]{\begin{quantikz}
        && \gate{#1} &&
    \end{quantikz} }

\newcommand{\Rz}[1]{
    \ensuremath{
        \begin{pmatrix} 
            e^{-i\frac{#1}{2}} & 0 \\ 0 & e^{i\frac{#1}{2}} 
        \end{pmatrix}
    }
}

\newcommand{\Ry}[1]{
    \ensuremath{
        \begin{pmatrix} 
            \coshalf{#1} & -\sinhalf{#1} \\ \sinhalf{#1} & \coshalf{#1}
        \end{pmatrix}
    }
}

